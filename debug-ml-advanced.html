<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug ML Avanzado</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .prediction-item { margin: 10px 0; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>üîß Debug ML Avanzado - Predicciones</h1>
    
    <div class="debug-section">
        <h2>Estado del Sistema</h2>
        <div id="debug-status">Verificando...</div>
    </div>
    
    <div class="debug-section">
        <h2>Predicciones de Prueba</h2>
        <button onclick="testPredictions()">Generar Predicciones de Prueba</button>
        <div id="test-predictions"></div>
    </div>

    <script>
        // Simular estructura de predicciones
        function testPredictions() {
            const testData = {
                svm: {
                    c1: [
                        { prediction: 5, confidence: 0.8, date: '2025-08-05', day: 1 },
                        { prediction: 2, confidence: 0.7, date: '2025-08-06', day: 2 },
                        { prediction: 8, confidence: 0.9, date: '2025-08-07', day: 3 }
                    ],
                    c2: [
                        { prediction: 3, confidence: 0.6, date: '2025-08-05', day: 1 },
                        { prediction: 7, confidence: 0.8, date: '2025-08-06', day: 2 },
                        { prediction: 1, confidence: 0.7, date: '2025-08-07', day: 3 }
                    ],
                    c3: [
                        { prediction: 9, confidence: 0.9, date: '2025-08-05', day: 1 },
                        { prediction: 4, confidence: 0.5, date: '2025-08-06', day: 2 },
                        { prediction: 6, confidence: 0.8, date: '2025-08-07', day: 3 }
                    ],
                    c4: [
                        { prediction: 1, confidence: 0.7, date: '2025-08-05', day: 1 },
                        { prediction: 0, confidence: 0.6, date: '2025-08-06', day: 2 },
                        { prediction: 3, confidence: 0.9, date: '2025-08-07', day: 3 }
                    ]
                }
            };
            
            displayTestPredictions(testData);
        }
        
        function displayTestPredictions(predictions) {
            const container = document.getElementById('test-predictions');
            const svmPredictions = predictions.svm;
            
            if (!svmPredictions.c1 || svmPredictions.c1.length === 0) {
                container.innerHTML = '<p>‚ùå No se generaron predicciones completas</p>';
                return;
            }
            
            const numDays = svmPredictions.c1.length;
            const combinedPredictions = [];
            
            for (let i = 0; i < numDays; i++) {
                const c1Pred = svmPredictions.c1[i];
                const c2Pred = svmPredictions.c2[i];
                const c3Pred = svmPredictions.c3[i];
                const c4Pred = svmPredictions.c4[i];
                
                const combo = `${c1Pred?.prediction ?? 'X'}${c2Pred?.prediction ?? 'X'}${c3Pred?.prediction ?? 'X'}${c4Pred?.prediction ?? 'X'}`;
                const avgConfidence = ((c1Pred?.confidence || 0) + 
                                     (c2Pred?.confidence || 0) + 
                                     (c3Pred?.confidence || 0) + 
                                     (c4Pred?.confidence || 0)) / 4;
                
                combinedPredictions.push({
                    day: i + 1,
                    combo: combo,
                    confidence: avgConfidence,
                    date: c1Pred?.date || '',
                    individual: {
                        c1: c1Pred?.prediction ?? 'X',
                        c2: c2Pred?.prediction ?? 'X', 
                        c3: c3Pred?.prediction ?? 'X',
                        c4: c4Pred?.prediction ?? 'X'
                    }
                });
            }
            
            const predictionsHtml = combinedPredictions.map(pred => `
                <div class="prediction-item">
                    <div><strong>D√≠a ${pred.day}</strong></div>
                    <div><strong>N√∫mero: ${pred.combo}</strong></div>
                    <div>Fecha: ${pred.date}</div>
                    <div>Individual: C1:${pred.individual.c1} C2:${pred.individual.c2} C3:${pred.individual.c3} C4:${pred.individual.c4}</div>
                    <div>Confianza: ${(pred.confidence * 100).toFixed(1)}%</div>
                </div>
            `).join('');
            
            container.innerHTML = predictionsHtml;
            console.log('Predicciones de prueba mostradas');
        }
        
        // Estado inicial
        document.getElementById('debug-status').innerHTML = `
            <p>‚úÖ Funciones de predicci√≥n implementadas</p>
            <p>‚úÖ Validaciones mejoradas</p>
            <p>‚úÖ Manejo de errores actualizado</p>
            <p>‚úÖ Estilos CSS a√±adidos</p>
        `;
    </script>
</body>
</html>